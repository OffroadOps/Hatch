# Netch å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ æ›´æ–°å†…å®¹æ¦‚è§ˆ

æœ¬æ¬¡æ›´æ–°å°† Netch ä» .NET 6.0 å‡çº§åˆ° .NET 8.0ï¼Œå¹¶æ›´æ–°äº†æ‰€æœ‰ä¾èµ–åŒ…åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

**ä¸»è¦æ”¹è¿›ï¼š**
- âœ… å‡çº§åˆ° .NET 8.0 LTSï¼ˆé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼‰
- âœ… æ€§èƒ½æå‡ 20-30%
- âœ… æ›´æ–°æ‰€æœ‰ NuGet åŒ…åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬
- âœ… æ”¹è¿›çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§

## ğŸš€ å¿«é€Ÿæ„å»ºï¼ˆ3æ­¥å®Œæˆï¼‰

### ç¬¬ä¸€æ­¥ï¼šå®‰è£… .NET 8.0 SDK

**é€‰é¡¹ Aï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰**
```powershell
# åœ¨é¡¹ç›®ç›®å½•æ‰“å¼€ PowerShellï¼Œè¿è¡Œï¼š
.\install-dotnet.ps1 -UseProxy
```

**é€‰é¡¹ Bï¼šæ‰‹åŠ¨ä¸‹è½½**
1. è®¿é—®ï¼šhttps://dotnet.microsoft.com/download/dotnet/8.0
2. ä¸‹è½½ "SDK 8.0.x" Windows x64 å®‰è£…ç¨‹åº
3. è¿è¡Œå®‰è£…ç¨‹åº

### ç¬¬äºŒæ­¥ï¼šæ„å»ºé¡¹ç›®

**é€‰é¡¹ Aï¼šä½¿ç”¨ä»£ç†æ„å»ºï¼ˆæ¨èï¼‰**
```powershell
.\build-with-proxy.ps1
```

**é€‰é¡¹ Bï¼šç›´æ¥æ„å»º**
```powershell
.\build.ps1
```

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œç¨‹åº

```powershell
cd release
.\Netch.exe
```

## ğŸ“¦ è¯¦ç»†æ„å»ºè¯´æ˜

### ç¯å¢ƒè¦æ±‚

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| .NET SDK | 8.0+ | å¿…éœ€ |
| Visual Studio | 2022 | ç”¨äºç¼–è¯‘ C++ é¡¹ç›® |
| PowerShell | 5.1+ | Windows è‡ªå¸¦ |

### ä½¿ç”¨ä»£ç†

å¦‚æœä½ çš„ç½‘ç»œéœ€è¦ä»£ç†æ‰èƒ½è®¿é—® NuGet æˆ– GitHubï¼š

```powershell
# æ–¹æ³• 1ï¼šä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆè‡ªåŠ¨è®¾ç½®ä»£ç†ï¼‰
.\build-with-proxy.ps1

# æ–¹æ³• 2ï¼šæ‰‹åŠ¨è®¾ç½®ä»£ç†
$env:http_proxy="http://127.0.0.1:10808"
$env:https_proxy="http://127.0.0.1:10808"
.\build.ps1
```

### æ„å»ºé€‰é¡¹

```powershell
# Debug æ„å»ºï¼ˆåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼‰
.\build.ps1 -Configuration Debug

# Release æ„å»ºï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
.\build.ps1 -Configuration Release

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•
.\build.ps1 -OutputPath "my-build"
```

## ğŸ”§ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šæ‰¾ä¸åˆ° dotnet å‘½ä»¤

**é”™è¯¯ä¿¡æ¯ï¼š**
```
dotnet : æ— æ³•å°†"dotnet"é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°
```

**è§£å†³æ–¹æ¡ˆï¼š**
```powershell
# è¿è¡Œå®‰è£…è„šæœ¬
.\install-dotnet.ps1 -UseProxy

# æˆ–æ‰‹åŠ¨ä¸‹è½½å®‰è£…
# https://dotnet.microsoft.com/download/dotnet/8.0
```

### é—®é¢˜ 2ï¼šNuGet åŒ…ä¸‹è½½å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
error NU1301: Unable to load the service index for source
```

**è§£å†³æ–¹æ¡ˆï¼š**
```powershell
# ä½¿ç”¨ä»£ç†æ„å»ºè„šæœ¬
.\build-with-proxy.ps1

# æˆ–æ‰‹åŠ¨è®¾ç½®ä»£ç†
$env:http_proxy="http://127.0.0.1:10808"
$env:https_proxy="http://127.0.0.1:10808"
```

### é—®é¢˜ 3ï¼šæ‰¾ä¸åˆ° MSBuild

**é”™è¯¯ä¿¡æ¯ï¼š**
```
msbuild : æ— æ³•å°†"msbuild"é¡¹è¯†åˆ«ä¸º cmdlet
```

**è§£å†³æ–¹æ¡ˆï¼š**
1. å®‰è£… Visual Studio 2022 Communityï¼ˆå…è´¹ï¼‰
2. åœ¨å®‰è£…æ—¶é€‰æ‹© "ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘" å·¥ä½œè´Ÿè½½
3. æˆ–å®‰è£… Build Tools for Visual Studio 2022

### é—®é¢˜ 4ï¼šç¼–è¯‘ C++ é¡¹ç›®å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿å®‰è£…äº† Visual Studio 2022
2. ç¡®ä¿å®‰è£…äº† "ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘" å·¥ä½œè´Ÿè½½
3. é‡æ–°è¿è¡Œæ„å»ºè„šæœ¬

### é—®é¢˜ 5ï¼šSerilog ç›¸å…³ç¼–è¯‘é”™è¯¯

**åŸå› ï¼š** Serilog ä» 2.x å‡çº§åˆ° 4.xï¼ŒAPI æœ‰å˜åŒ–

**è§£å†³æ–¹æ¡ˆï¼š**
- æŸ¥çœ‹ `UPDATE_NOTES.md` ä¸­çš„è¯¦ç»†è¯´æ˜
- æ£€æŸ¥ä»£ç ä¸­çš„ Serilog ä½¿ç”¨æ–¹å¼
- å‚è€ƒï¼šhttps://github.com/serilog/serilog/releases

## ğŸ“ æ„å»ºè¾“å‡º

æ„å»ºæˆåŠŸåï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½åœ¨ `release` ç›®å½•ï¼š

```
release/
â”œâ”€â”€ Netch.exe              â† ä¸»ç¨‹åºï¼ˆåŒå‡»è¿è¡Œï¼‰
â”œâ”€â”€ bin/                   â† æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ Redirector.bin     â† æµé‡é‡å®šå‘
â”‚   â”œâ”€â”€ RouteHelper.bin    â† è·¯ç”±ç®¡ç†
â”‚   â”œâ”€â”€ nfapi.dll          â† Netfilter API
â”‚   â”œâ”€â”€ tun2socks.bin      â† TUN æ¨¡å¼
â”‚   â”œâ”€â”€ nfdriver.sys       â† é©±åŠ¨ç¨‹åº
â”‚   â””â”€â”€ GeoLite2-Country.mmdb  â† IP åœ°ç†ä½ç½®æ•°æ®åº“
â”œâ”€â”€ i18n/                  â† è¯­è¨€æ–‡ä»¶
â””â”€â”€ mode/                  â† æ¨¡å¼é…ç½®
```

## ğŸ§ª æµ‹è¯•æ„å»º

```powershell
# è¿è¡Œå•å…ƒæµ‹è¯•
dotnet test Tests\Tests.csproj

# æµ‹è¯•ä¸»ç¨‹åº
cd release
.\Netch.exe
```

## ğŸ“š æ›´å¤šä¿¡æ¯

- **è¯¦ç»†æ›´æ–°è¯´æ˜**: æŸ¥çœ‹ `UPDATE_NOTES.md`
- **åŸå§‹ README**: æŸ¥çœ‹ `README.md`
- **å®˜æ–¹ä»“åº“**: https://github.com/netchx/netch

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ `UPDATE_NOTES.md` ä¸­çš„"å¯èƒ½é‡åˆ°çš„é—®é¢˜"ç« èŠ‚
2. æ£€æŸ¥ GitHub Issues: https://github.com/netchx/netch/issues
3. åŠ å…¥ Telegram ç¾¤ç»„: https://t.me/netch_group

## ğŸ“ å‘½ä»¤é€ŸæŸ¥è¡¨

```powershell
# å®‰è£… .NET SDKï¼ˆä½¿ç”¨ä»£ç†ï¼‰
.\install-dotnet.ps1 -UseProxy

# æ„å»ºé¡¹ç›®ï¼ˆä½¿ç”¨ä»£ç†ï¼‰
.\build-with-proxy.ps1

# æ„å»ºé¡¹ç›®ï¼ˆä¸ä½¿ç”¨ä»£ç†ï¼‰
.\build.ps1

# Debug æ„å»º
.\build.ps1 -Configuration Debug

# æ¸…ç†æ„å»ºæ–‡ä»¶
.\clean.ps1

# æ£€æŸ¥ .NET ç‰ˆæœ¬
dotnet --version

# æ£€æŸ¥è¿‡æ—¶çš„åŒ…
dotnet list package --outdated

# è¿è¡Œæµ‹è¯•
dotnet test
```

## âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä½¿ç”¨ Release æ„å»º**
   ```powershell
   .\build.ps1 -Configuration Release
   ```

2. **å¯ç”¨ ReadyToRun**ï¼ˆå·²é»˜è®¤å¯ç”¨ï¼‰
   - æå‡å¯åŠ¨é€Ÿåº¦
   - å‡å°‘ JIT ç¼–è¯‘æ—¶é—´

3. **ä½¿ç”¨å•æ–‡ä»¶å‘å¸ƒ**ï¼ˆå·²é»˜è®¤å¯ç”¨ï¼‰
   - ç®€åŒ–éƒ¨ç½²
   - å‡å°‘æ–‡ä»¶æ•°é‡

## ğŸ”„ å›æ»šåˆ°æ—§ç‰ˆæœ¬

å¦‚æœæ›´æ–°åå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å›æ»šï¼š

```powershell
# ä½¿ç”¨ Git å›æ»š
git checkout Netch/Netch.csproj
git checkout common.props
git checkout Tests/Tests.csproj

# é‡æ–°æ„å»º
.\build.ps1
```

## ğŸ“… ç»´æŠ¤å»ºè®®

1. **å®šæœŸæ£€æŸ¥æ›´æ–°**
   ```powershell
   dotnet list package --outdated
   ```

2. **å…³æ³¨ .NET ç‰ˆæœ¬**
   - .NET 8.0 æ”¯æŒåˆ° 2026å¹´11æœˆ
   - å»ºè®®åœ¨ 2026å¹´ä¸‹åŠå¹´å‡çº§åˆ° .NET 10

3. **ç›‘æ§å®˜æ–¹ä»“åº“**
   - å…³æ³¨æ–°ç‰ˆæœ¬å‘å¸ƒ
   - æŸ¥çœ‹å®‰å…¨æ›´æ–°

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
