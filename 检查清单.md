# Netch 更新检查清单

## ✅ 更新前检查

- [ ] 已备份原始项目文件
- [ ] 已备份 Netch 配置文件（如果有）
- [ ] 已阅读 `更新摘要.txt`
- [ ] 已阅读 `快速开始.md`
- [ ] 确认网络连接正常（或已配置代理）

## ✅ 环境准备

### .NET SDK
- [ ] 已安装 .NET 8.0 SDK
  ```powershell
  # 检查命令
  dotnet --version
  # 应显示 8.0.x
  ```
- [ ] 如未安装，运行: `.\install-dotnet.ps1 -UseProxy`

### Visual Studio / Build Tools
- [ ] 已安装 Visual Studio 2022 或 Build Tools
- [ ] 已安装 "使用 C++ 的桌面开发" 工作负载
- [ ] MSBuild 可用
  ```powershell
  # 检查命令（在 VS Developer Command Prompt 中）
  msbuild -version
  ```

### PowerShell
- [ ] PowerShell 版本 5.1 或更高
  ```powershell
  # 检查命令
  $PSVersionTable.PSVersion
  ```

## ✅ 代理配置（如需要）

- [ ] 已确认代理地址和端口
  - 默认: `http://127.0.0.1:10808`
  - 如不同，修改 `build-with-proxy.ps1` 中的 `$ProxyUrl`

- [ ] 已测试代理连接
  ```powershell
  # 测试命令
  $env:http_proxy="http://127.0.0.1:10808"
  Invoke-WebRequest -Uri "https://www.google.com" -UseBasicParsing
  ```

## ✅ 构建过程

### 第一次构建
- [ ] 运行清理脚本
  ```powershell
  .\clean.ps1
  ```

- [ ] 运行构建脚本（选择一个）
  - [ ] 使用代理: `.\build-with-proxy.ps1`
  - [ ] 不使用代理: `.\build.ps1`

- [ ] 构建成功，无错误信息

### 构建输出检查
- [ ] `release` 目录已创建
- [ ] `release\Netch.exe` 存在
- [ ] `release\bin` 目录存在
- [ ] 以下文件存在于 `release\bin`:
  - [ ] `Redirector.bin`
  - [ ] `RouteHelper.bin`
  - [ ] `nfapi.dll`
  - [ ] `tun2socks.bin`
  - [ ] `nfdriver.sys`
  - [ ] `aiodns.conf`
  - [ ] `stun.txt`
  - [ ] `GeoLite2-Country.mmdb`

## ✅ 功能测试

### 基本功能
- [ ] 程序可以启动
  ```powershell
  cd release
  .\Netch.exe
  ```

- [ ] 界面正常显示
- [ ] 可以添加服务器配置
- [ ] 可以选择模式
- [ ] 可以启动代理

### 核心功能（根据使用场景选择）
- [ ] ProcessMode（进程模式）正常工作
- [ ] TunMode（TUN 模式）正常工作
- [ ] ShareMode（共享模式）正常工作
- [ ] WebMode（Web 代理模式）正常工作

### 协议支持（根据使用场景选择）
- [ ] Socks5 协议正常
- [ ] Shadowsocks 协议正常
- [ ] ShadowsocksR 协议正常
- [ ] VMess 协议正常
- [ ] VLESS 协议正常
- [ ] Trojan 协议正常
- [ ] WireGuard 协议正常

## ✅ 性能验证

- [ ] 启动速度正常（应比旧版本快）
- [ ] 内存占用合理
- [ ] CPU 使用率正常
- [ ] 网络连接稳定

## ✅ 日志检查

- [ ] 日志文件正常生成
- [ ] 日志内容可读
- [ ] 无异常错误信息
- [ ] Serilog 日志格式正确

## ✅ 问题排查

### 如果构建失败

#### 错误: 找不到 dotnet
- [ ] 已安装 .NET 8.0 SDK
- [ ] 已重启 PowerShell
- [ ] 已检查 PATH 环境变量

#### 错误: NuGet 包下载失败
- [ ] 已配置代理
- [ ] 网络连接正常
- [ ] 已尝试清理 NuGet 缓存
  ```powershell
  dotnet nuget locals all --clear
  ```

#### 错误: MSBuild 失败
- [ ] 已安装 Visual Studio 2022
- [ ] 已安装 C++ 工作负载
- [ ] 已在 VS Developer Command Prompt 中运行

#### 错误: Serilog 编译错误
- [ ] 已查看 `UPDATE_NOTES.md` 中的说明
- [ ] 已检查代码中的 Serilog 使用
- [ ] 已参考 Serilog 迁移文档

### 如果程序运行异常

#### 程序无法启动
- [ ] 已检查是否缺少依赖文件
- [ ] 已检查 .NET 8.0 Runtime 是否安装
- [ ] 已查看错误日志

#### 功能不正常
- [ ] 已检查驱动是否正确安装
- [ ] 已检查防火墙设置
- [ ] 已检查管理员权限
- [ ] 已查看程序日志

## ✅ 文档检查

- [ ] 已阅读 `UPDATE_NOTES.md`
- [ ] 已阅读 `快速开始.md`
- [ ] 已阅读 `CHANGELOG-2026.md`
- [ ] 已了解主要变更
- [ ] 已了解可能的问题

## ✅ 备份和回滚

### 备份
- [ ] 已备份原始项目文件
- [ ] 已备份构建输出
- [ ] 已备份配置文件

### 回滚准备
- [ ] 知道如何回滚到旧版本
  ```powershell
  git checkout common.props
  git checkout Netch/Netch.csproj
  git checkout Tests/Tests.csproj
  ```

## ✅ 后续维护

### 定期检查
- [ ] 设置提醒：每月检查依赖包更新
  ```powershell
  dotnet list package --outdated
  ```

- [ ] 关注 .NET 版本支持周期
  - .NET 8.0 支持到 2026年11月

- [ ] 关注 Netch 官方更新
  - GitHub: https://github.com/netchx/netch
  - Telegram: https://t.me/netch_channel

### 文档更新
- [ ] 记录遇到的问题和解决方案
- [ ] 更新团队文档（如有）
- [ ] 分享经验给社区

## ✅ 完成确认

- [ ] 所有检查项已完成
- [ ] 程序运行正常
- [ ] 性能符合预期
- [ ] 已记录问题和解决方案
- [ ] 已通知相关人员（如有）

## 📝 问题记录

### 遇到的问题
```
问题 1:
描述: 
解决方案:
时间:

问题 2:
描述:
解决方案:
时间:
```

### 性能对比
```
启动时间:
  旧版本: ___ 秒
  新版本: ___ 秒
  改进: ___%

内存占用:
  旧版本: ___ MB
  新版本: ___ MB
  改进: ___%

连接速度:
  旧版本: ___ ms
  新版本: ___ ms
  改进: ___%
```

## 📞 获取帮助

如果遇到问题：

1. **查看文档**
   - `UPDATE_NOTES.md` - 详细说明
   - `快速开始.md` - 快速指南
   - `CHANGELOG-2026.md` - 变更日志

2. **在线资源**
   - GitHub Issues: https://github.com/netchx/netch/issues
   - Telegram 群组: https://t.me/netch_group
   - .NET 文档: https://learn.microsoft.com/dotnet/

3. **社区支持**
   - 搜索已有的问题和解决方案
   - 提交新的 Issue（如果是 bug）
   - 在 Telegram 群组询问

---

**检查日期**: _______________  
**检查人**: _______________  
**结果**: ☐ 通过  ☐ 有问题（见问题记录）  
**备注**: _______________
